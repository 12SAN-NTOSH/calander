"use strict";(globalThis.webpackChunk_openmrs_esm_patient_forms_app=globalThis.webpackChunk_openmrs_esm_patient_forms_app||[]).push([[104],{4114:(e,n,r)=>{r.d(n,{Z:()=>i});var t=r(5698),o=r.n(t),a=r(9613),s=r.n(a)()(o());s.push([e.id,".-esm-patient-forms__html-form-entry-wrapper__wrapper___bkx4M{width:95%;border:none;margin:0;padding:0;display:none}","",{version:3,sources:["webpack://./src/htmlformentry/html-form-entry-wrapper.scss"],names:[],mappings:"AAAA,8DACE,SAAA,CACA,WAAA,CACA,QAAA,CACA,SAAA,CACA,YAAA",sourcesContent:[".wrapper {\n  width: 95%;\n  border: none;\n  margin: 0;\n  padding: 0;\n  display: none;\n}\n"],sourceRoot:""}]),s.locals={wrapper:"-esm-patient-forms__html-form-entry-wrapper__wrapper___bkx4M"};const i=s},7104:(e,n,r)=>{r.r(n),r.d(n,{default:()=>y});var t=r(268),o=r.n(t),a=r(884),s=r(321),i=r.n(s),c=r(1195),l=r.n(c),u=r(3275),m=r.n(u),p=r(7162),d=r.n(p),f=r(2094),v=r.n(f),A=r(757),h=r.n(A),w=r(4114),_={};_.styleTagTransform=h(),_.setAttributes=d(),_.insert=m().bind(null,"head"),_.domAPI=l(),_.insertStyleElement=v(),i()(w.Z,_);const g=w.Z&&w.Z.locals?w.Z.locals:void 0,C=function(e){var n=e.closeWorkspaceWithSavedChanges,r=e.src,a=(0,t.useRef)();(0,t.useEffect)((function(){var e=function(e){return"close-workspace"===(null==e?void 0:e.data)&&n()};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}),[n]);var s=(0,t.useCallback)((function(){var e,n,r,t=a.current,o=a.current.contentDocument;null===(e=o.querySelector("header"))||void 0===e||e.remove(),null===(n=o.querySelector(".patient-header"))||void 0===n||n.remove(),null===(r=o.querySelector("#breadcrumbs"))||void 0===r||r.remove(),t.style.display="block",t.height=o.body.scrollHeight+50+"px"}),[]);return o().createElement("div",null,o().createElement("iframe",{ref:a,src:r,className:g.wrapper,onLoad:s}))};var b=r(2870);const y=function(e){var n,r=e.patientUuid,t=e.closeWorkspaceWithSavedChanges,s=e.promptBeforeClosing,i=e.formInfo,c=(0,b.usePatient)(r).patient,l=(0,a.useVisitOrOfflineVisit)(r).currentVisit,u=i||{},m=u.encounterUuid,p=u.visitUuid,d=u.htmlForm;s((function(){return!0}));var f,v="".concat(window.openmrsBase,"/htmlformentryui/htmlform/").concat(d.formUiPage,".page?patientId=").concat(r,"&visitId=").concat(null!==(n=null!=p?p:null==l?void 0:l.uuid)&&void 0!==n?n:null,"&definitionUiResource=").concat(d.formUiResource,"&returnUrl=post-message:close-workspace"),A="".concat(window.openmrsBase,"/htmlformentryui/htmlform/").concat(d.formEditUiPage,".page?patientId=").concat(r,"&visitId=").concat(null!==(f=null!=p?p:null==l?void 0:l.uuid)&&void 0!==f?f:null,"&encounterId=").concat(m,"&definitionUiResource=").concat(d.formUiResource,"&returnUrl=post-message:close-workspace"),h=i&&r&&c;return o().createElement("div",null,h&&o().createElement(C,{src:m?A:v,closeWorkspaceWithSavedChanges:t}))}}}]);